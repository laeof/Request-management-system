@model IEnumerable<UserRole>

<title>@ViewBag.Title</title>

<h2>@ViewBag.Title</h2>

<table>
    <tr class="first-row">
        <th>
            @Html.DisplayNameFor(model => model.User.FirstName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.User.Surname)
        </th>
        @if (User.IsInRole("admin"))
        {
            <th>
                @Html.DisplayNameFor(model => model.User.Login)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.User.Password)
            </th>
        }
        <th>
            @Html.DisplayNameFor(model => model.User.Comment)
        </th>
        @if(!User.IsInRole("mounter"))
        {
            <th></th>
            <th></th>
            <th></th>
        }
    </tr>
    @foreach (var item in Model)
    {
        @if (User.IsInRole("manager"))
        {
            if(item.RoleId > 2)
            {   
                <tr>
                    <th>
                        @Html.DisplayFor(modelItem => item.User.FirstName)
                    </th>
                    <th>
                        @Html.DisplayFor(modelItem => item.User.Surname)
                    </th>
                    <th>
                        @Html.DisplayFor(modelItem => item.User.Comment)
                    </th>
                    <th class="editlink" onclick="window.location.href = '@Url.Action("Edit", new { id = item.UserRoleId })'">
                        <a>Редагувати</a>
                    </th>
                    @if (!(item.UserId == ViewBag.Id))
                    {
                        @if (item.User.IsActive)
                        {
                            <th class="cancellink" onclick="window.location.href = '@Url.Action("ActivityChange", new { id = item.User.Id })'">
                                <a>Відключити</a>
                            </th>
                        }
                        else
                        {
                            <th class="openlink" onclick="window.location.href = '@Url.Action("ActivityChange", new { id = item.User.Id })'">
                                <a>Включити</a>
                            </th>
                        }
                        <th class="closelink" onclick="window.location.href = '@Url.Action("Delete", new { id = item.User.Id })'">
                            <a>Видалити</a>
                        </th>
                    }
                    else
                    {
                        if (item.User.IsActive)
                        {
                            <th class="cancellink inactive">
                                <a>Відключити</a>
                            </th>
                        }
                        else
                        {
                            <th class="openlink inactive">
                                <a>Включити</a>
                            </th>
                        }
                        <th class="closelink inactive">
                            <a>Видалити</a>
                        </th>
                    }
                </tr>
            }
        }
        else if(User.IsInRole("admin"))
        {   
            <tr>
                <th>
                    @Html.DisplayFor(modelItem => item.User.FirstName)
                </th>
                <th>
                    @Html.DisplayFor(modelItem => item.User.Surname)
                </th>
                <th>
                    @Html.DisplayFor(modelItem => item.User.Login)
                </th>
                <th>
                    @Html.DisplayFor(modelItem => item.User.Password)
                </th>
                <th>
                    @Html.DisplayFor(modelItem => item.User.Comment)
                </th>
                <th class="editlink" onclick="window.location.href = '@Url.Action("Edit", new { id = item.UserRoleId })'">
                    <a>Редагувати</a>
                </th>
                @if (!(item.UserId == ViewBag.Id))
                {
                    @if (item.User.IsActive)
                    {
                    <th class="cancellink" onclick="window.location.href = '@Url.Action("ActivityChange", new { id = item.User.Id })'">
                            <a>Відключити</a>
                        </th>
                    }
                    else
                    {
                        <th class="openlink" onclick="window.location.href = '@Url.Action("ActivityChange", new { id = item.User.Id })'">
                            <a>Включити</a>
                        </th>
                    }
                    <th class="closelink" onclick="window.location.href = '@Url.Action("Delete", new { id = item.User.Id })'">
                        <a>Видалити</a>
                    </th>
                }
                else
                {
                    if (item.User.IsActive)
                    {
                        <th class="cancellink inactive">
                            <a>Відключити</a>
                        </th>
                    }
                    else
                    {
                        <th class="openlink inactive">
                            <a>Включити</a>
                        </th>
                    }
                    <th class="closelink inactive">
                        <a>Видалити</a>
                    </th>
                }
            </tr>
        }
    }
</table>